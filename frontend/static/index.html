<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>三角洲砖皮模拟器 · Web</title>
  <link rel="icon" href="favicon.ico"/>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="brand">三角洲砖皮模拟器 · Web</div>
      <nav id="nav"></nav>
    </header>

    <div id="global-notify" class="global-notify"></div>

    <main id="page"></main>

    <footer class="footer">
      <small>© Delta Brick Web v1</small>
    </footer>
  </div>

  <!-- 全局脚本顺序：api -> 组件 -> app -->
  <script src="api.js"></script>
  <script src="components/visuals.js"></script>
  <script src="components/nav.js"></script>
  <script src="components/auth.js"></script>
  <script src="components/wallet.js"></script>
  <script src="components/shop.js"></script>
  <script src="components/gacha.js"></script>
  <script src="components/inventory.js"></script>
  <script src="components/craft.js"></script>
  <script src="components/market.js"></script>
  <script src="components/cultivation.js"></script>
  <script src="components/cookie_factory.js"></script>
  <script src="components/admin.js"></script>

  <!-- odds 路由守卫：如访问 #/odds，重定向到首页 -->
  <script>
  (function(){
    var path = location.pathname || "";
    if (path.startsWith("/web/")) {
      var tail = path.slice(5);
      if (tail && !tail.includes('.') && !location.hash) {
        tail = tail.replace(/^\/+/, "").replace(/\/+$/, "");
        location.replace("/web/#/" + tail);
        return;
      }
    }
  })();

  (function(){
    function guard() {
      if (location.hash === '#/odds') {
        // 你的首页路由：若首页是 '#/' 就改成 '#/'
        location.replace('#/home');
      }
    }
    window.addEventListener('hashchange', guard);
    guard(); // 首次进入也检查一次
  })();
  </script>

  <script src="app.js"></script>
</body>
</html>
